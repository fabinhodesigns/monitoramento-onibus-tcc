<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Monitoramento de √înibus</title>
</head>
<body>
    <h1>Monitoramento Inteligente de √înibus</h1>

    <h2>üöè Parada:</h2>
    <ul>
        <li><strong>Nome:</strong> {{ parada.nome }}</li>
        <li><strong>Latitude:</strong> {{ parada.latitude }}</li>
        <li><strong>Longitude:</strong> {{ parada.longitude }}</li>
    </ul>

    <h2>üöå √înibus:</h2>
    <ul>
        <li><strong>N√∫mero:</strong> {{ onibus.numero }}</li>
        <li><strong>Latitude:</strong> {{ onibus.latitude }}</li>
        <li><strong>Longitude:</strong> {{ onibus.longitude }}</li>
        <li><strong>√öltima atualiza√ß√£o:</strong> {{ onibus.ultima_atualizacao }}</li>
    </ul>

    <!-- ... (conte√∫do anterior) -->

    <h2>üó∫Ô∏è Rota no Google Maps:</h2>
    <div id="mapa" style="width:100%; height:500px;"></div>

    <script>
    function initMap() {
        const coordOnibus = { lat: {{ onibus.latitude }}, lng: {{ onibus.longitude }} };
        const coordParada = { lat: parseFloat('{{ parada.latitude }}'), lng: parseFloat('{{ parada.longitude }}') };

        const mapa = new google.maps.Map(document.getElementById('mapa'), {
            zoom: 14,
            center: coordOnibus
        });

        // Exibir marcadores
        new google.maps.Marker({
            position: coordOnibus,
            map: mapa,
            label: 'üöå'
        });

        new google.maps.Marker({
            position: coordParada,
            map: mapa,
            label: 'üöè'
        });

        // Exibir a rota entre √¥nibus e parada
        const directionsService = new google.maps.DirectionsService();
        const directionsRenderer = new google.maps.DirectionsRenderer();

        directionsRenderer.setMap(mapa);

        const request = {
            origin: coordOnibus,
            destination: coordParada,
            travelMode: 'DRIVING'
        };

        directionsService.route(request, function(result, status) {
            if (status === 'OK') {
                directionsRenderer.setDirections(result);
            } else {
                alert('Erro ao calcular rota: ' + status);
            }
        });
    }
    </script>

    <!-- sua chave API aqui -->
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAB4XzkFaozx9kHkUA6kl9Y49AyqtpCrbc&callback=initMap">
    </script>

</body>
</html>
